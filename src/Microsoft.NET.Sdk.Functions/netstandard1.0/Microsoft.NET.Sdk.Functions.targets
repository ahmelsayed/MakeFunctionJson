<!--
***********************************************************************************************
Sdk.targets

WARNING:  DO NOT MODIFY this file unless you are knowledgeable about MSBuild and have
          created a backup copy.  Incorrect changes to this file will make it
          impossible to load or build your projects from the command-line or the IDE.

Copyright (c) .NET Foundation. All rights reserved. 
***********************************************************************************************
-->
<Project ToolsVersion="14.0" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">

  <Import Project="$(MSBuildSdksPath)\Microsoft.NET.Sdk.Publish\Sdk\Sdk.targets"
         Condition="Exists('$(MSBuildSdksPath)\Microsoft.NET.Sdk.Publish\Sdk\Sdk.targets')" />

  <ItemGroup>
    <ProjectCapability Include="AzureFunctions"/>
  </ItemGroup>
  
  <PropertyGroup>
    <_FunctionsTaskFramework Condition=" '$(MSBuildRuntimeType)' == 'Core'">netstandard1.5</_FunctionsTaskFramework>
    <_FunctionsTaskFramework Condition=" '$(_FunctionsTaskFramework)' == ''">net46</_FunctionsTaskFramework>
    <_FunctionsTasksDir Condition=" '$(_FunctionsTasksDir)'=='' ">$(MSBuildThisFileDirectory)..\..\tools\$(_FunctionsTaskFramework)\</_FunctionsTasksDir>
    <_FunctionsTaskAssemblyFullPath Condition=" '$(_FunctionsTaskAssemblyFullPath)'=='' ">$(_FunctionsTasksDir)\Microsoft.NET.Sdk.Functions.dll</_FunctionsTaskAssemblyFullPath>
  </PropertyGroup>
  
  <UsingTask TaskName="BuildFunctions" AssemblyFile="$(_FunctionsTaskAssemblyFullPath)"/>
  
  <Target Name="BuildFunctionProject" AfterTargets="Build" >
    
    <BuildFunctions
      TargetPath="$(TargetPath)"
      OutputPath="$(OutDir)"
      ProjectDirectory="$(MSBuildProjectDirectory)"/>
  </Target>
  
</Project>
